<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Метод Анализа Иерархий Практика</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100vh;
      background-color: #f5f5f5;
      font-family: 'Lora', serif;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      width: 100%;
      max-width: 900px;
      padding: 0 20px;
      text-align: center;
    }
    .page-title {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 24px;
    }
    .tabs {
      display: inline-flex;
      gap: 12px;
      margin-bottom: 32px;
    }
    .tab {
      padding: 8px 20px;
      font-size: 16px;
      font-weight: 600;
      background-color: #FACC15;
      color: #111;
      border: 2px solid #111;
      border-radius: 6px;
      cursor: pointer;
    }
    .tab.active {
      background-color: #e5b00f;
      border-color: #111;
    }
    .content {
      width: 100%;
      margin-left: auto;
      margin-right: auto;
      border: 2px solid #000;
      border-radius: 16px;
      padding: 24px 32px;
      background-color: #fff;
      margin-bottom: 20px;
    }
    .tab-content {
      display: none;
      text-align: center;
    }
    .tab-content.active {
      display: block;
    }
    .input-box {
      margin-bottom: 24px;
    }
    .input-box label {
      font-size: 16px;
      margin-bottom: 8px;
      display: block;
    }
    .fields-wrapper {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-bottom: 24px;
    }
    .field-box {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 200px;
    }
    .field-box input {
      width: 100%;
      padding: 8px 12px;
      font-size: 16px;
      border: 1px solid #aaa;
      border-radius: 6px;
    }
    .name-inputs {
      margin-top: 16px;
      margin-bottom: 24px;
    }
    .name-inputs .dynamic-input {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }
    .name-inputs .dynamic-input label {
      font-size: 16px;
      margin-right: 8px;
      min-width: 120px;
    }
    .name-inputs .dynamic-input input {
      width: 200px;
      padding: 8px 12px;
      font-size: 16px;
      border: 1px solid #aaa;
      border-radius: 6px;
    }
    .matrix-table {
      border-collapse: collapse;
      margin: 24px auto;
    }
    .matrix-table th {
      background-color: #f0f0f0;
      font-weight: 600;
      border: 1px solid #999;
      padding: 8px 12px;
    }
    .matrix-table td {
      width: 80px;
      height: 50px;
      border: 1px solid #999;
      background-color: #e8f6fa;
    }
    .matrix-table td input {
      width: 100%;
      height: 100%;
      border: none;
      background: transparent;
      text-align: center;
      font-size: 14px;
    }
    .matrix-table td:first-child {
      background-color: #f0f0f0;
      font-weight: 600;
      text-align: center;
      padding: 8px 12px;
      width: 120px;
    }
    .next-btn, .solve-btn {
      padding: 12px 28px;
      font-size: 18px;
      font-weight: 600;
      background-color: #FACC15;
      color: #111;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }
    .next-btn:hover, .solve-btn:hover {
      background-color: #e5b00f;
      transform: translateY(-2px);
    }
    .result-text {
      margin-top: 20px;
      font-weight: 600;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="page-title">Метод Анализа Иерархий Практика</h1>
    <div class="tabs">
      <div class="tab active" onclick="showTab(1)">Шаг 1</div>
      <div class="tab" onclick="showTab(2)">Шаг 2</div>
      <div class="tab" onclick="showTab(3)">Ответ</div>
    </div>

    <div class="content">
      <div id="tab1" class="tab-content active">
        <div class="input-box">
          <div class="fields-wrapper">
            <div class="field-box">
              <label>Введите количество альтернатив (строки)</label>
              <input type="number" id="altCount" min="1" onchange="generateNameInputs()">
            </div>
            <div class="field-box">
              <label>Введите количество критериев (столбцы)</label>
              <input type="number" id="critCount" min="1" onchange="generateNameInputs()">
            </div>
          </div>
        </div>
        <div class="name-inputs" id="altNamesContainer">
          <label>Введите названия альтернатив</label>
        </div>
        <div class="name-inputs" id="critNamesContainer">
          <label>Введите названия критериев</label>
        </div>
        <button class="next-btn" onclick="generateTable()">Далее</button>
      </div>

      <div id="tab2" class="tab-content">
        <p>Заданные таблицы альтернатив</p>
        <table class="matrix-table" id="dataTable"></table>
        <button class="solve-btn" onclick="calculatePareto()">Решить</button>
      </div>

      <div id="tab3" class="tab-content">
        <div class="result-text" id="result">Парето-оптимальное множество: (ожидание данных)</div>
      </div>
    </div>
  </div>

  <script>
    let paretoResult = "Парето-оптимальное множество: (ожидание данных)";

    function showTab(tabNumber) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      document.querySelector(`.tab:nth-child(${tabNumber})`).classList.add('active');
      document.getElementById(`tab${tabNumber}`).classList.add('active');
      if (tabNumber === 3) {
        document.getElementById('result').innerHTML = paretoResult;
      }
    }

    function generateNameInputs() {
      const altCount = parseInt(document.getElementById('altCount').value) || 0;
      const critCount = parseInt(document.getElementById('critCount').value) || 0;
      const altContainer = document.getElementById('altNamesContainer');
      const critContainer = document.getElementById('critNamesContainer');

      altContainer.innerHTML = '<label>Введите названия альтернатив</label>';
      critContainer.innerHTML = '<label>Введите названия критериев</label>';

      for (let i = 0; i < altCount; i++) {
        const div = document.createElement('div');
        div.className = 'dynamic-input';
        div.innerHTML = `<label>Альтернатива ${i + 1}:</label><input type="text" id="altName${i}" placeholder="Альтернатива ${i + 1}">`;
        altContainer.appendChild(div);
      }

      for (let i = 0; i < critCount; i++) {
        const div = document.createElement('div');
        div.className = 'dynamic-input';
        div.innerHTML = `<label>Критерий ${i + 1}:</label><input type="text" id="critName${i}" placeholder="Критерий ${i + 1}">`;
        critContainer.appendChild(div);
      }
    }

    function generateTable() {
      const altCount = parseInt(document.getElementById('altCount').value) || 2;
      const critCount = parseInt(document.getElementById('critCount').value) || 2;
      const altNames = [];
      const critNames = [];

      for (let i = 0; i < altCount; i++) {
        const altName = document.getElementById(`altName${i}`)?.value || `Альтернатива ${i + 1}`;
        altNames.push(altName);
      }

      for (let i = 0; i < critCount; i++) {
        const critName = document.getElementById(`critName${i}`)?.value || `Критерий ${i + 1}`;
        critNames.push(critName);
      }

      let tableHTML = '<tr>';
      tableHTML += '<td></td>';
      for (let i = 0; i < critCount; i++) {
        tableHTML += `<td>${critNames[i]}</td>`;
      }
      tableHTML += '</tr>';
      for (let i = 0; i < altCount; i++) {
        tableHTML += '<tr>';
        tableHTML += `<td>${altNames[i]}</td>`;
        for (let j = 0; j < critCount; j++) {
          tableHTML += `<td><input type="number" step="0.01" placeholder="0.00"></td>`;
        }
        tableHTML += '</tr>';
      }
      document.getElementById('dataTable').innerHTML = tableHTML;
      showTab(2);
    }

    function calculatePareto() {
      const inputs = document.querySelectorAll('#dataTable input');
      const altCount = document.querySelectorAll('#dataTable tr').length - 1;
      const critCount = document.querySelectorAll('#dataTable tr:first-child td').length - 1;
      const data = [];
      for (let i = 0; i < altCount; i++) {
        data[i] = [];
        for (let j = 0; j < critCount; j++) {
          data[i][j] = parseFloat(inputs[i * critCount + j].value) || 0;
        }
      }

      let paretoSet = [];
      for (let i = 0; i < altCount; i++) {
        let isDominated = false;
        for (let j = 0; j < altCount; j++) {
          if (i !== j) {
            let dominates = true;
            for (let k = 0; k < critCount; k++) {
              if (data[j][k] < data[i][k]) {
                dominates = false;
                break;
              }
            }
            if (dominates && data[j].some((val, k) => val > data[i][k])) {
              isDominated = true;
              break;
            }
          }
        }
        if (!isDominated) paretoSet.push(i + 1);
      }
      paretoResult = `Ответ : ${paretoSet.join(', ') || '(ожидание данных)'}`;
      showTab(3);
    }
  </script>
</body>
</html>